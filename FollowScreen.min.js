(function(e){function t(e){e.css({top:0,bottom:""})}function n(e){e.css({top:"",bottom:0})}function r(e,t,n){e.css({top:t-n,bottom:""})}function i(e,t,n){e.css({top:"",bottom:n-t})}function s(t,n){var r=t.offset().top-e(window).scrollTop();t.css({top:r-(n||0),bottom:""})}function o(o){var u=e(window),a=o.data.settings,f=o.data.follower,l=f.outerHeight(),c=f.offset().top,h=c+l,p=l<u.height(),d=u.scrollTop(),v=d+u.height(),m=d-a.topPixel<=0,g=a.bottomPixel-v<=0,y=f.data("followScreen")||0,b=d-y;if(l<a.bottomPixel-a.topPixel){if(p){if(m){r(f,a.topPixel,d)}else if(g&&a.bottomPixel-d<l){i(f,a.bottomPixel,v)}else{t(f)}}else{if(g){i(f,a.bottomPixel,v)}else if(m){r(f,a.topPixel,d)}else{if(b<0){if(Math.abs(b)>d-c){t(f)}else{s(f,b)}}else{if(Math.abs(b)>h-v){n(f)}else{s(f,b)}}}}}f.data("followScreen",d)}e.fn.followScreen=function(t){var n=Math.floor(Math.random()*10^5),r=e.extend({topPixel:0,bottomPixel:Infinity},t),i=this.data("fsn");if(i){e(window).off("scroll.followScreen."+i,o)}return this.each(function(){var t={follower:e(this),settings:r};e(this).data("fsn",n).css("position","fixed");e(window).on("scroll.followScreen."+n,t,o);o({data:t})})}})(jQuery)